# 구조 패턴

어플리케이션 구조를 만드는 방법, SOLID 원칙을 저 잘 준수하면서도 코드의 범용적인 사용성을
높이고 리팩터링을 쉽게 할 구조들을 제안한다.

객체의 구조를 설계 할때는 다음과 같이 잘 알려진 세가지 방법론을 이용한다.

1. 상속

2. 컴포지션(Composition)
   - 구성 요소를 멤버로서 가지고, 그 멤버 객체들이 부모 객체 없이는 존재할 수 없는 형태의 구성
   - 예를 들어, `owner<T>` 타입을 멤버로 가지고 있는 경우 객체가 소멸될 때 멤버도 소멸됨


3. 애그리게이션(Aggregation)
   - 객체가 다른 객체를 내부에서 참조하기는 하지만 그 객체가 독립적으로  존재할 수 있는 형태
   - 예를 들어, `T*` 또는 `shared_ptr<T>` 타입의 멤버를 갖는 경우

- 최근에는 컴포지션과 애그리게이션 같은 형태로 구현
- 만약 개인 정보를 담는 클래스 `Person`이 있고 이 클래스가 필드 멤버로서 주솟값 클래스 `Address`
를 갖는다면, `Address` 외부 타입으로 둘 수도 있고 내부의 중첩 타입으로 둘 수도 있음.
두 경우 모두 `Address`를 public으로 제공하여 `Address` 또는 `Person::Address`로 인스턴스화 할 수 있다.

- 실질적으로는 애그리게이션이지만 컴포지션이라는 용어를 사용하는 경우가 흔해 두 용어의 차별화가 흐려지고 있음.

  - 제어 역전 컨테이너가 `컴포지션 뿌리 패턴`을 구성한다라고 하지만, 제어 역전 컨테이너는 개별
  객체의 라이 사이클을 제어함
  - 즉, 이 경우 컴포지션이라는 용어를 사용하지만 실질적으로는 애그리게이션임